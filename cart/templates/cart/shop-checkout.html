{% extends "base.html" %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="breadcrumb breadcrumb-dividers-no-opacity font-weight-bold text-6 justify-content-center my-5">
                    <li class="text-transform-none me-2">
                        <a href="{% url 'cart' %}"
                           class="text-decoration-none text-color-dark text-color-hover-primary">Shopping
                        Cart</a>
                    </li>
                    <li class="text-transform-none text-color-dark me-2">
                        <a href="{% url 'checkout' %}"
                           class="text-decoration-none text-color-primary">Checkout</a>
                    </li>
                    <li class="text-transform-none text-color-grey-lighten">
                        <a href="shop-order-complete.html"
                           class="text-decoration-none text-color-grey-lighten text-color-hover-primary">Order Complete</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row"></div>
        <div class="row">
            <div class="col-lg-5 mb-4 mb-lg-0">
                <div class="card border-width-3 border-radius-0 border-color-hover-dark mb-4">
                    <div class="card-body">
                        <h4 class="font-weight-bold text-uppercase text-4 mb-3">Billing Address</h4>
                        <table class="shop_table cart-totals mb-0">
                            <tbody>
                                {% for k,v in billing_address.items %}
                                    <tr>
                                        <td>
                                            <strong class="d-block text-color-dark line-height-1 font-weight-semibold">{{ k|title }}
                                            </td>
                                            <td class="text-end align-top">
                                                <strong class="d-block text-color-dark line-height-1 font-weight-semibold">{{ v|default_if_none:" "|title }}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                        <tr class="total">
                                            <td>
                                                <a href="{{ request.user.billing_url }}?next={{ request.path }}"
                                                   class="text-color-dark text-3-5">Edit</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card border-width-3 border-radius-0 border-color-hover-dark mb-4">
                            <div class="card-body">
                                <h4 class="font-weight-bold text-uppercase text-4 mb-3">Delivery Address</h4>
                                <table class="shop_table cart-totals mb-0">
                                    <tbody>
                                        {% for k,v in delivery_address.items %}
                                            <tr>
                                                <td>
                                                    <strong class="d-block text-color-dark line-height-1 font-weight-semibold">{{ k|title }}
                                                    </td>
                                                    <td class="text-end align-top">
                                                        <strong class="d-block text-color-dark line-height-1 font-weight-semibold">{{ v|default_if_none:" "|title }}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                <tr class="total">
                                                    <td>
                                                        <a href="{{ request.user.delivery_url }}?next={{ request.path }}"
                                                           class="text-color-dark text-3-5">Edit</a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-7 position-relative">
                                <div class="card border-width-3 border-radius-0 border-color-hover-dark"
                                     data-plugin-sticky
                                     data-plugin-options="{'minWidth': 991, 'containerSelector': '.row', 'padding': {'top': 85}}">
                                    <div class="card-body">
                                        <h4 class="font-weight-bold text-uppercase text-4 mb-3">Your Order</h4>
                                        <table class="shop_table cart-totals mb-3">
                                            <tbody>
                                                <tr>
                                                    <td colspan="2" class="border-top-0">
                                                        <strong class="text-color-dark">Product</strong>
                                                    </td>
                                                </tr>
                                                {% for cart_item in object_list.cartitems_set.all %}
                                                    <tr>
                                                        <td>
                                                            <strong class="d-block text-color-dark line-height-1 font-weight-semibold">{{ cart_item.cart_product_id }}
                                                                <span class="product-qty">x{{ cart_item.quantity }}</span></strong>
                                                            <span class="text-1">{{ cart_item.cart_var }}</span>
                                                        </td>
                                                        <td class="text-end align-top">
                                                            <span class="amount font-weight-medium text-color-grey">{{ cart_item.cart_subtotal|floatformat:"-2" }}$</span>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                <tr class="cart-subtotal">
                                                    <td class="border-top-0">
                                                        <strong class="text-color-dark">Subtotal</strong>
                                                    </td>
                                                    <td class="border-top-0 text-end">
                                                        <strong><span class="amount font-weight-medium">{{ object_list.cart_items_subtotal_sum|floatformat:"-2" }}</span></strong>
                                                    </td>
                                                </tr>
                                                <tr class="total">
                                                    <td>
                                                        <strong class="text-color-dark text-3-5">Shipping Method</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <strong class="text-color-dark"><span class="amount text-color-dark text-3">{{ object_list.shipping_method }}</span></strong>
                                                    </td>
                                                </tr>
                                                <tr class="total">
                                                    <td>
                                                        <strong class="text-color-dark text-3-5">Payment Method</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <strong class="text-color-dark"><span class="amount text-color-dark text-3">{{ object_list.payment_method }}</span></strong>
                                                    </td>
                                                </tr>
                                                <tr class="total">
                                                    <td>
                                                        <strong class="text-color-dark text-3-5">Total</strong>
                                                    </td>
                                                    <td class="text-end">
                                                        <strong class="text-color-dark"><span class="amount text-color-dark text-5">{{ object_list.cart_items_total|floatformat:"-2" }}$</span></strong>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        Your personal data will be used to process your order,
                                                        support your experience throughout this website, and for
                                                        other purposes described in our privacy policy.
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <button type="submit"
                                                class="btn btn-dark btn-modern w-100 text-uppercase bg-color-hover-primary border-color-hover-primary border-radius-0 text-3 py-3">
                                            Place Order <i class="fas fa-arrow-right ms-2"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endblock content %}
